<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>2020-12-11 Group meeting</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
	</head>
	<body>
        <style>
        .container{
            display: flex;
        }
        .col{
            flex: 1;
        }
        .reveal pre {
            margin: 0 auto;
        }
        .reveal h2 {
            font-size: 30pt;
            margin-bottom: 1em;
        }
        .reveal h5 {
            font-size: 20pt;
            color: #666666;
            margin-bottom: 0;
        }
        </style>
		<div class="reveal">
			<div class="slides">
                <section>
                    New features in GCHP v13,<br>
                    and WUCR1
                    
                    <div style="font-size: 16pt; margin-top: 2em;">
                        <span>Liam Bindle</span><br>
                        <span>Group meeting: 2020-12-11</span>
                    </div>
                </section>
                <section>
                    <span style="font-size: 16pt;">
                        You can get this presentation at <a href="http://liambindle.ca/gm1209/index.html">http://liambindle.ca/gm1209/index.html</a> 
                    </span>
                </section>
                <section>    
                    <h2>New in GCHP 13</h2>
                    
                    <div class="container" style="font-size: 16pt; line-height: 1.6;">
                        <div class="col fragment" align="left">
                            <h6 style="margin-bottom: 0.1em;">Of interest to the group</h6>
                            <ul style="line-height: 2;">
                                <li>Erin's CEDS_GBD-MAPS "ON" by default</li>
                                <li>GCHP satellite overpass diagnostics</li>
                                <li>GCHP stretched-grids</li>
                                <li>GCPy is a utility</li>
                                <li>"Always-up-to-date" containers</li>
                            </ul>
                        </div>
                        <div class="col"  align="left">
                            <div class="fragment">
                                <h6 style="margin-bottom: 0.1em;">Other noteworthy features</h6>
                                <ul>
                                    <li>Improved build system</li>
                                    <li>Improved documentation</li>
                                    <li>Unit Tester is retired</li>
                                </ul>
                            </div>
                            <div class="fragment">
                                <h6 style="margin-bottom: 0.1em; margin-top: 1em;">Release info</h6>
                                <ul>
                                    <li>Ready to be used: 13.0.0-beta.1</li>
                                    <li>Official release: ~January 2021</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
                <section>
                    <h5>New in GCHP 13</h5>
                    <h2>Satellite diagnostics</h2>
                </section>
                <section data-transition="slide-in none-out">
                    <h5>New in GCHP 13</h5>
                    <h2>Satellite diagnostics</h2>
                    <div style="width: 100%;">
                        <video data-autoplay loop data-background-video-muted src="https://presentation-material.s3.us-east-2.amazonaws.com/satellite_overpass_diagn-s1.webm"></video>
					</div>
                </section>
                <section data-transition="none">
                    <h5>New in GCHP 13</h5>
                    <h2>Satellite diagnostics</h2>
                    <div style="width: 100%;">
                        <video data-autoplay loop data-background-video-muted src="https://presentation-material.s3.us-east-2.amazonaws.com/satellite_overpass_diagn-s2.webm"></video>
					</div>
                </section>
                <section data-transition="none slide-out">
                    <h5>New in GCHP 13</h5>
                    <h2>Satellite diagnostics</h2>
                    <div style="width: 100%;">
                        <video data-autoplay loop data-background-video-muted src="https://presentation-material.s3.us-east-2.amazonaws.com/satellite_overpass_diagn-s3.webm"></video>
					</div>
                </section>
                <section data-transition="slide-in">
                    <h5>New in GCHP 13</h5>
                    <h2>Satellite diagnostics</h2>
                    <div class="container" style="font-size: 18pt;">

                    <div class="col" align="left" style="margin: auto;">
                        <ul style="line-height: 2;">
                            <li>Facilitated by 1D output (new feature)</li>
                            <li>Requires a "track file"</li>
                            <li>Point to track file in HISTORY.rc</li>
                        </ul>
                    </div>
                    
                    <div class="col">
                        <img src="track_file.png" width="100%">
                    </div>
                    
                    </div>
                </section>
                <section data-transition="slide-in">
                    <h5>New in GCHP 13</h5>
                    <h2>Satellite diagnostics</h2>
                    <img src="satellite_overpass_flowchart-1.png" style="margin: 0 0;">
                    <img src="satellite_overpass_flowchart-2.png" style="margin: 0 0;" class="fragment">
                    <img src="satellite_overpass_flowchart-3.png" style="margin: 0 0;" class="fragment">
                </section>
                <section>
                    <h5>New in GCHP 13</h5>
                    <h2>Stretched-grids</h2>
                </section>
                <section data-transition="slide-in none-out">
                    <h5>New in GCHP 13</h5>
                    <h2>Stretched-grids</h2>
                    <div style="height: 500px;;">
                        <img style="margin: 0;" src="stretch-pre.jpeg">
					</div>
                </section>
                <section data-transition="none-in slide-out">
                    <h5>New in GCHP 13</h5>
                    <h2>Stretched-grids</h2>
                    <div style="height: 500px;">
                        <video data-autoplay loop data-background-video-muted src="https://presentation-material.s3.us-east-2.amazonaws.com/stretching.webm"></video>
					</div>
                </section>
                <section data-background-video="https://presentation-material.s3.us-east-2.amazonaws.com/China-D2-MR.webm" data-background-video-loop data-background-video-muted data-background-size="contain" data-background-color="#161516">
                </section>
                <section>
                    <h5>New in GCHP 13</h5>
                    <h2>Stretched-grids</h2>
                        <pre style="width: 800px; font-size: 12pt;" class="bash"><code data-trim data-noescape >
                        #... 
                        
                        #------------------------------------------------
                        #   Internal Cubed Sphere Resolution
                        #------------------------------------------------
                        CS_RES=48
                        STRETCH_GRID=ON
                        STRETCH_FACTOR=3.0
                        TARGET_LAT=25.0
                        TARGET_LON=112.0
                        # Primary resolution is an integer value
                        #   24 ~ 4x5, 48 ~ 2x2.25, 90 ~ 1x1.25, 180 ~ 1/2 deg, 360 ~ 1/4 deg
                        # Set stretched grid to ON or OFF. If ON, follow these rules for parameters:
                        #    (1) Minimum STRETCH_FACTOR is 1.0001
                        #    (2) Target lat and lon must be floats (contain decimal)
                        #    (3) Target lon must be in range [0,360)
                        
                        #...
                    </code><span style="font-size: 12pt; margin: 1em; font-family: Source Sans Pro, Helvetica, sans-serif;"">This is a snippet from runConfig.sh</span></pre>
                </section>
                <section data-transition="slide-in">
                    <h5>New in GCHP 13</h5>
                    <h2>Stretched-grids</h2>
                    <img src="stretched_grid_flowchart-1.png" style="margin: 0 0;">
                    <img src="stretched_grid_flowchart-2.png" style="margin: 0 0;" class="fragment">
                </section>
                <section>
                    <h5>New in GCHP 13</h5>
                    <h2>Always up-to-date containers</h2>
                </section>
                <section>
                    <h5>New in GCHP 13</h5>
                    <h2>Always up-to-date containers</h2>

                    <div class="container" style="margin-bottom: 1em;">
                        <div class="col"  style="font-size:16pt;" align="left">
                            <h6 style="margin-bottom: 0.3em;">GCPy interactive job</h6>
                            <ul>
                                <li>GEOS-Chem utilities</li>
                                <li>Quickly visualize output</li>
                                <li>Regridding data</li>
                                <li>Satellite diagn. utils.</li>
                                <li>Stretched-grid utils.</li>
                            </ul>
                        </div>
                        <div class="col" align="left">
                            <pre style="width: 600px; font-size: 12pt;"><code data-trim data-noescape  data-line-numbers="6">
                            #!/bin/bash
                            #BSUB -Is
                            #BSUB -n 6
                            #BSUB -R "rusage[mem=32GB] span[hosts=1]"
                            #BSUB -q general-interactive
                            #BSUB -a 'docker(geoschem/gcpy:latest)'

                            bash
                            </code><span style="font-size: 10pt; font-family: Source Sans Pro, Helvetica, sans-serif;"">Copy this file from: /storage1/fs1/rvmartin/Active/Shared/LB-20201211/gcpy-interactive.bsub</span></pre>
                        </div>
                    </div>

                    <div class="container fragment">
                        <div class="col" style="font-size:16pt;" align="left">
                            <h6 style="margin-bottom: 0.3em;">GCHP interactive job</h6>
                            <ul>
                                <li>Create run directories <ul>
                                    <li><code style="font-size: 12pt;">createRunDir.sh</code></li>
                                </ul></li>
                                <li>Run GCHP<ul>
                                    <li><code style="font-size: 12pt;">mpirun -n 12 gchp</code></li>
                                </ul></li>
                            </ul>
                        </div>
                        <div class="col" align="left">
                            <pre style="width: 600px;  font-size: 12pt;"><code data-trim data-noescape  data-line-numbers="6">
                            #!/bin/bash
                            #BSUB -Is
                            #BSUB -n 12
                            #BSUB -R "rusage[mem=32GB] span[hosts=1]"
                            #BSUB -q general-interactive
                            #BSUB -a 'docker(geoschem/gchp:13.0.0-beta.1-13-g924e47f)'

                            bash
                            </code><span style="font-size: 10pt; font-family: Source Sans Pro, Helvetica, sans-serif;"">Copy this file from: /storage1/fs1/rvmartin/Active/Shared/LB-20201211/gchp-interactive.bsub</span></pre>
                        </div>
                    </div>
                </section>
                <section>
                    <h5>New in GCHP 13</h5>
                    <h2>Documentation on ReadTheDocs</h2>
                </section>
                <section>
                    <h5>New in GCHP 13</h5>
                    <h2 style="margin-bottom: 0.5em;">Documentation on ReadTheDocs</h2>
                    <div class="container" style="font-size: 12pt; margin-bottom: 1em;">
                        <div class="col">
                            <strong>GCHP docs</strong> @ <a href="https://gchp.readthedocs.io">https://gchp.readthedocs.io</a>
                        </div>
                        <div class="col">
                            <strong>GCPy docs</strong> @ <a href="https://gcpy.readthedocs.io">https://gcpy.readthedocs.io</a>
                        </div>
                    </div>
                    <iframe style="border:1px solid black;" width=95% height=500 marginheight=0 marginwidth=0 scrolling=yes src="https://gchp.readthedocs.io"></iframe>
                </section>
                
                <section>
                    <h5>New in GCHP 13</h5>
                    <h2>Final thoughts</h2>

                    <div style="text-align: center;" class="fragment">
                        <div style="display: inline-block; text-align: left; font-size: 16pt;">
                            <!-- <ul>
                            <li>It's a good time to switch to GCHP</li>
                            <li>13.0.0-beta.1 is ready</li>
                            </ul> -->
                            <h6 style="margin-top: 1em; margin-bottom: 0.5em;">Ideas for getting started</h6>
                            <ul>
                                <li>Use the GCHP container 
                                    <ul>
                                        <li><span style="font-size: 12pt;">geoschem/gchp:13.0.0-beta.1-13-g924e47f</span></li>
                                        <li><span style="font-size: 12pt;">Interactive & batch job scripts in "Shared/LB-20201211"</span></li>
                                    </ul>
                                </li>
                                <li>Focus on learning to:
                                    <ul>
                                        <li>run directories creation & configuration</li>
                                        <li>running GCHP</li>
                                    </ul>
                                </li>
                                <li> Read:
                                    <ul>
                                        <li><a href="https://gchp.readthedocs.io">https://gchp.readthedocs.io</a>, and</li>
                                        <li><a href="https://gcpy.readthedocs.io">https://gcpy.readthedocs.io</a></li>
                                    </ul>
                                </li>
                    

                            </ul>
                        </div>
                    </div>
                </section>

                <section>WashU Chemistry Run (WUCR1)</section>
                
                <section data-background-video="https://presentation-material.s3.us-east-2.amazonaws.com/wucr1_aod_1.webm" data-background-video-loop data-background-video-muted data-background-size="contain" data-background-color="#0F0E0F">
                </section>
                <section>
                    <h5>WUCR1</h5>
                    <h2>Run info</h2>
                    <div class="container" style="font-size: 16pt;" align="left">
                        <div class="col">
                            <h6 style="margin-top: 1em; margin-bottom: 0.3em;">Setup</h6>
                            <ul>
                                <li>Period: June 1, 2018 &mdash;July 1, 2019</li>
                                <li>Resolution: C360 (~25 km)</li>
                                <li>Throughput: ~7 days/day</li>
                            </ul>
                            <h6 style="margin-top: 2.5em; margin-bottom: 0.3em;">Daily means diagnostics</h6>
                            <ul>
                                <li>All tracers</li>
                                <li>All metfields</li>
                            </ul>
                        </div>
                        <div class="col" align="left">
                            <h6 style="margin-top: 1em; margin-bottom: 0.3em;">Satellite diagnostics (13:30)</h6>
                            <ul>
                                <li>AODs, aerosol masses</li>
                                <li>NO2, NO, HNO3, R4N2, PAN</li>
                                <li>CO, SO2, CH2O</li>
                                <li>Metfields for column calculations</li>
                            </ul>
                            <h6 style="margin-top: 1em; margin-bottom: 0.3em;">Animations  diagnostics (15min)</h6>
                            <ul>
                                <li>AODs</li>
                                <li>O3 at 900 hPa</li>
                            </ul>
                        </div>
                    </div>
                </section>
                <section data-background-video="https://presentation-material.s3.us-east-2.amazonaws.com/wucr1_aod_1.webm" data-background-video-loop data-background-video-muted data-background-size="contain" data-background-color="#0F0E0F">
                    <h2 style="color: black;">Questions?</h2>
                </section>
                    <!-- <h2>Satellite diagnostics</h2>
                    <div style="width: 100%;">
                        <video data-autoplay loop data-background-video-muted src="https://presentation-material.s3.us-east-2.amazonaws.com/wucr1_aod_1.webm"></video>
					</div>
                </section> -->
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
